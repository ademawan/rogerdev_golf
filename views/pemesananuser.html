<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="csrf-token" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="RogerDev">
    <meta name="generator" content="Hugo 0.87.0">
    <title>Dashboard </title>
    

    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.0.1/css/buttons.dataTables.min.css">
    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" integrity="sha512-mSYUmp1HYZDFaVKK//63EcZq4iFWFjxSL+Z3T/aCt4IO9Cejm03q3NKKYN6pFQzY0SBOr8h+eCIAZHPXcpZaNw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.0/font/bootstrap-icons.css">
    

    
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />


    <!-- Custom styles for this template -->
    <link href="{{.path}}public/css/dashboard.css" rel="stylesheet">
    <link rel="stylesheet" href="{{.path}}public/css/style.css">
    
    
  </head>
  <body>

    <header class="navbar sticky-top flex-md-nowrap navbar-dark p-1 shadow" style="background-color: rgb(235, 159, 17)">
        <a class=" text-center col-md-3 col-lg-2 me-0 px-3 text-decoration-none" href="/admin/dashboard"><img class="logo" src="resources/img/logo.png" alt=""></a>
        <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      </header>
    <!-- end -->

<div class="container-fluid">
    <div class="row">
        <div class="col-md-3 col-lg-2 collapse show" id="sidebarCollapse">
          
          <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
            <div class="position-sticky pt-3">
              <ul class="nav flex-column">
                <li class="nav-item">
                    <a class="nav-link" href="/user/pemesanan">
                      <span data-feather="home"></span>BERANDA
                    </a>
                  </li>
        
                  <li><hr class="dropdown-divider"></li>
        
                <li class="nav-item">
                      <li><a class="dropdown-item active" href="/user/pemesanan">Pemesanan</a></li>
                  </li>
                 
                <li><hr class="dropdown-divider"></li>
        
                <li class="nav-item">
                  <button type="button" class="nav-link border-0 bg-transparent text-dark" data-bs-toggle="modal" data-bs-target="#modalLogout">
                    KELUAR AKUN
                  </button>
                </li>
                <li><hr class="dropdown-divider"></li>
        
                <li class="nav-item">
                  <a class="nav-link" data-bs-toggle="collapse" id="sidebarCollapseToggle" role="button" aria-expanded="false" aria-controls="collapseExample">
                    <span data-feather="home"></span>
                    <h1 class="text-center">
                      <i class="bi bi-arrow-left-circle-fill"></i>
                    </h1>
                  </a>
                </li>
              </ul>
              <ul class="nav d-block flex-column fixed-bottom w-25 responstime">
                <li class="nav-item ">
                  <a class="nav-link" data-bs-toggle="collapse" href="#" role="button" aria-expanded="false" aria-controls="collapseExample">
                    <span id="tanggal" style="background-color: rgb(235, 159, 17)"></span>
                    <H5 id="clock"></H5>
                  </a>
                </li>
              </ul>
            </div>
        
        
            <!-- Button trigger modal -->
        
          </nav>
    
    
          <!-- end -->
        </div>
        <div class="" id="sembunyikanSidebar">
          <h1>
            <i class=" fixed-top bi bi-arrow-right-circle-fill" style="top: 50%; width:30px;" hidden></i>
          </h1>
        </div>
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4" id="main">
    <div class="row">
        
        <div class="d-flex justify-content-center flex-wrap flex-md-nowrap align-items-center border-bottom">
          <h1 class="h2 d-blockr">DAFTAR PEMESANAN</h1>
            <!-- -- <div class="btn-toolbar mb-2 mb-md-0">
              <div class="btn-group me-2">
                <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
                <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
              </div>
              <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
                <span data-feather="calendar"></span>
                This week
              </button>
            </div> -- -->
          </div>
        
          <div class="row my-3">
            <div class="col-md-12">
              <button type="button" id="tombolPemesanan" class="btn linka d-inline mb-2" style="background-color: rgba(104, 91, 19, 0.782) " data-bs-toggle="collapse" data-bs-target="#tambahuser" aria-expanded="false" aria-controls="collapseExample">
                Tambah Pemesanan
              </button>
              <div hidden>
                <button type="button" id="tombolRefreshTable" class="btn linka d-inline mb-2" style="background-color: rgba(104, 91, 19, 0.782) " >
                  Refresh Table
                </button>
            </div>
              
            <div class="col-md-12 collapse" id="tambahuser">
              <div class="col-md">
                <form class="form-horizontal form-disable-enter" name="formtambahpemesanan" id="formtambahpemesanan">
                  <input type="hidden" id="pemesanan_id" name="pemesanan_id" class="form-control" value="">
      
                  <div class="row justify-content-around">
               
                    <div class="col-lg-5 shadow-sm">
                    
                      <div data-spy="scroll" data-bs-target="#scroll-ku" data-bs-offset="0" style="height: 300px;overflow: auto;">
                        <div class="row py-2" style="margin:0 !important;">
                          <div class="col-md-12" >
                            <div class="mb-3 row">
                              <label for="inputtext" class="col-sm-3 col-form-label">Pemesanan Nama</label>
                              <div class="col-sm-9">
                                <input type="text" name="pemesanan_nama" class="form-control" id="pemesanan_nama">
                                <span class="text-danger error-text pemesanan_nama_error"></span>
      
                              </div>
                            </div>
                          </div>

                        <div class="col-md-12">
                            <div class="mb-3 row">
                              <label for="inputtext" class="col-sm-3 col-form-label">Pemesanan Date</label>
                              <div class="col-sm-9">  
                                  <input type="date" name="pemesanan_date" class="form-control" id="pemesanan_date">
                                   <span class="text-danger error-text pemesanan_date_error"></span>
                              </div>
                            </div>      
                          </div>
                          <div class="col-md-12">
                            <div class="mb-3 row">
                              <label for="inputtext" class="col-sm-3 col-form-label">Pemesanan Time</label>
                              <div class="col-sm-9">  
                                  <input type="time" name="pemesanan_time" class="form-control" id="pemesanan_time">
                                   <span class="text-danger error-text pemesanan_time_error"></span>
                              </div>
                            </div>      
                          </div>

                          <div class="col-md-12">
                            <div class="mb-3 row">
                              <label for="inputtext" class="col-sm-3 col-form-label">Pemesanan Email</label>
                              <div class="col-sm-9">  
                                  <input type="email" name="pemesanan_email" class="form-control" id="pemesanan_email">
                                   <span class="text-danger error-text pemesanan_email_error"></span>
                              </div>
                            </div>      
                          </div>

                          <div class="col-md-12">
                            <div class="mb-3 row">
                              <label for="inputtext" class="col-sm-3 col-form-label">Pemesanan No Hp</label>
                              <div class="col-sm-9">  
                                  <input type="text" name="pemesanan_no_hp" class="form-control" id="pemesanan_no_hp">
                                   <span class="text-danger error-text pemesanan_no_hp_error"></span>
                              </div>
                            </div>      
                          </div>

                          <div class="col-md-12" >
                              <div class="mb-3 row">
                                <label for="inputtext" class="col-sm-3 col-form-label">Pemesanan Status </label>
                                <div class="col-sm-3"  style="padding-left: 0 !important">
                                  <select class="form-select bg-secondary text-light" id="pemesanan_status" name="pemesanan_status">
                                    <option value="Selesai" selected>Selesai</option>
                                    <option value="Diterima">Diterima</option>
                                    <option value="Ditolak">Ditolak</option>
                                  </select>
                                </div>  
                              </div>
                            </div>

                            <div class="col-md-12">
                                <div class="mb-3 row">
                                  <label for="inputtext" class="col-sm-3 col-form-label">Pemesanan Alamat</label>
                                  <div class="col-sm-9">  
                                      <input type="text" name="pemesanan_alamat" class="form-control" id="pemesanan_alamat">
                                       <span class="text-danger error-text pemesanan_alamat_error"></span>
                                  </div>
                                </div>      
                              </div>

      
                        </div>
                            <div class="d-grid gap-2 d-md-flex justify-content-md-center telusuri">
                              <button id="saveBtnUpdatePemesanan" class="btn btn-primary me-md-2" type="submit">Tambah</button>
                              <button id="saveBtnTambahPemesanan" class="btn btn-primary me-md-2" type="submit">Tambah</button>
                              <button id="saveBtnBatalPemesanan" class="btn btn-danger" type="submit">Batal</button>
                          </div>
               
                      </div>
                    </div>
                    <div class="col-lg-6 shadow-sm">Lorem ipsum dolor sit amet consectetur adipisicing elit. Hic maxime quidem modi repellat fugit velit explicabo nostrum sequi, blanditiis eum voluptas deserunt culpa nemo ut recusandae at nulla illo officiis dolores, cupiditate deleniti vel libero. Accusantium fugit officiis repellat eos sed, voluptatem facere reiciendis eaque inventore cupiditate repellendus veniam veritatis corrupti dignissimos voluptas. Eveniet obcaecati iste dignissimos autem.
                      <div class="row">
                        <small>
                        <span class="text-danger error-text pemesanan_nama_errornotif"></span>
                        <span class="text-danger error-text pemesanan_date_errornotif"></span>
                        <span class="text-danger error-text pemesanan_time_errornotif"></span>
                        <span class="text-danger error-text pemesanan_email_errornotif"></span>
                        <span class="text-danger error-text pemesanan_no_hp_errornotif"></span>
                        <span class="text-danger error-text pemesanan_status_errornotif"></span>
                        <span class="text-danger error-text pemesanan_alamat_errornotif"></span>

                        </small>
                      </div>
      
                    </div>
                  </div>
        
                  </div>
        
              </form>
        
              </div>
            </div>
        
          
          <div class="table-responsive">
            <table id="myTable" class="table table-striped w-100">
              <thead>
                <tr>
                  <th scope="col">Pemesanan Nama</th>
                  <th scope="col">Pemesanan Date</th>
                  <th scope="col">Pemesanan Time</th>
                  <th scope="col">Pemesanan Email</th>
                  <th scope="col">Pemesanan No Hp</th>
                  <th scope="col">Pemesanan Status</th>
                  <th scope="col">Pemesanan Alamat</th>
                  <th scope="col">Dibuat Pada</th>
                  <th scope="col">Action</th>
                </tr>
              </thead>
              <tbody>
                
              </tbody>
            </table>
          </div>
            
      
      </div>
</div>


<script src="https://code.jquery.com/jquery-3.5.1.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

      <script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js" integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha" crossorigin="anonymous"></script>
      <script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.11.3/b-2.0.1/datatables.min.js"></script>
      <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
      <script src="https://cdn.datatables.net/buttons/2.0.1/js/dataTables.buttons.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
      <script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.html5.min.js"></script>
      <script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.print.min.js"></script>



<script src="https://cdn.jsdelivr.net/npm/datatables-buttons-excel-styles@1.2.0/js/buttons.html5.styles.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/datatables-buttons-excel-styles@1.2.0/js/buttons.html5.styles.templates.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js" integrity="sha512-T/tUfKSV1bihCnd+MxKD0Hm1uBBroVYBOYSk1knyvQ9VyZJpc/ALb4P0r6ubwVPSGB2GvjeoMAJJImBG12TiaQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>

$(document).ready( function () {

  var token=localStorage.getItem("accessToken")

    var table = $('#myTable').DataTable( {
       
       processing: true,
       serverSide: true,
       paging:true,
       scrollX: true,
       scrollY: true,
     
       ajax: {
            url: "/user/pemesanan/datatables",
            type: "GET",
            headers: { 'Authorization': 'Bearer '+token},
             error:function (data) {     
              if (data.status==403){
                  window.location = '/admin/user';
              }
              if (data.status==401){
                window.location = '/login';
              }
             }
       },
       columns: [
               { data: 'pemesanan_nama', name: 'pemesanan_nama', class:'text-center' },
               { data: 'pemesanan_date', name: 'pemesanan_date' },
               { data: 'pemesanan_time', name: 'pemesanan_time' },
               { data: 'pemesanan_email', name: 'pemesanan_email' },
               { data: 'pemesanan_no_hp', name: 'pemesanan_no_hp' },
               { data: 'pemesanan_status', name: 'pemesanan_status' },
               { data: 'pemesanan_alamat', name: 'pemesanan_alamat' },
               { data: 'created_at', name: 'created_at' },
               { data: 'action', name: 'action' },            
           ],
     });
 
     $('#tombolRefreshTable').click(function(){
       table.draw();
     });

     $('.bi-arrow-right-circle-fill').click( function(e){
            e.preventDefault();
            $('#sidebarCollapse').removeAttr('hidden');
            $(this).attr('hidden', 'true');
            $('#main').attr('class', 'col-md-9 ms-sm-auto col-lg-10 px-md-4');
            $('#tombolRefreshTable').trigger('click');

          });

          $('#sidebarCollapseToggle').click( function(e){
            e.preventDefault();
            
            $('.bi-arrow-right-circle-fill').removeAttr('hidden');
            $('#sidebarCollapse').attr('hidden', 'true');
            $('#tombolRefreshTable').trigger('click');
            $('#main').attr('class', 'col-md-12 ms-sm-auto col-lg-12 px-md-4');

          });
     
     $('#tombolPemesanan').click(function(){
       $('#saveBtnTambahPemesanan').addClass('show');
       $('#saveBtnUpdatePemesanan').attr('hidden', 'true'); 
       $('#saveBtnTambahPemesanan').removeAttr('hidden'); 
     });
 
     // Tambah user
     $('#saveBtnTambahPemesanan').click( function(e){
 
       e.preventDefault();
       $(this).html('Sending..');
   
       $.ajax({
         data: $('#formtambahpemesanan').serialize(),
         url: "/user/pemesanan/ajax",
         type: "POST",
         dataType: 'json',
         beforeSend:function(){
               $(document).find('span.error-text').text('');
             },
         success: function (data) {
 
           
                 if(data.status==0){
                   $.each(data.error, function(frefix, val){
                     $('span.'+frefix+'_error').text(val[0]);
                     $('span.'+frefix+'_errornotif').text('['+val[0]+']');
                     $('#saveBtnTambahPemesanan').html('Tambah');
                   });
                 }else{
                   $('#formtambahpemesanan').trigger("reset");
                   table.draw();
                   $('#saveBtnTambahPemesanan').html('Tambah');
                   $('#tombolPemesanan').trigger('click');
                   $('.table-responsive').before(`<div class="alert alert-warning alert-dismissible fade show" role="alert"> Sukses tambah data !!<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>`);
                   $('.alert').delay(2000).fadeOut(function() {
                     $(this).remove(); 
                  });
                     
                 }
         },
         
       });
 
     })
 
 
     //edit
     $('body').on('click', '.editUser', function () {
       $('#saveBtnTambahPemesanan').attr('hidden', 'true'); 
       $('#saveBtnUpdatePemesanan').removeAttr('hidden'); 
       $('#saveBtnUpdatePemesanan').html('Update');
 
 
 
 
       var pemesanan_id = $(this).data('id');
       $.get("/user/pemesanan/ajax" +'/' + pemesanan_id +'/edit', function (data) {
         $('#tambahuser').addClass('show');
         var dataNew = data.data
 
           $('#pemesanan_id').val(dataNew.pemesanan_id);
           $('#pemesanan_nama').val(dataNew.pemesanan_nama);
           $('#pemesanan_date').val(dataNew.pemesanan_date);
           $('#pemesanan_time').val(dataNew.pemesanan_time);
           $('#pemesanan_email').val(dataNew.pemesanan_email);
           $('#pemesanan_no_hp').val(dataNew.pemesanan_no_hp);
           $('#pemesanan_status').val(dataNew.pemesanan_status);
           $('#pemesanan_alamat').val(dataNew.pemesanan_alamat);

 
           $("html, body").animate({ scrollTop: 0 }, "slow");
           // $('#scroll-ku').scrollTop = 0;
           
       })
    });
 
 
     //update
    $('#saveBtnUpdatePemesanan').click(function (e) {
 
       e.preventDefault();
       $(this).html('Sending..');
       var pemesanan_id = $('#pemesanan_id').val();
       $.ajax({
         data: $('#formtambahpemesanan').serialize(),
         url: "/user/pemesanan/ajax"+'/'+pemesanan_id,
         type: "PUT",
         dataType: 'json',
         beforeSend:function(){
               $(document).find('span.error-text').text('');
             },
         success: function (data) {
 
           
                 if(data.status==0){
                   $.each(data.error, function(frefix, val){
                     $('span.'+frefix+'_error').text(val[0]);
                     $('span.'+frefix+'_errornotif').text('['+val[0]+']');
                     $('#updateBtnUpdatePemesanan').html('Update');
                   });
                 }else{
                   $(this).html('Update');
                   $('#formtambahpemesanan').trigger("reset");
                   table.draw();
                   $('#saveBtnTambahPemesanan').html('Tambah');
                   $('#tombolPemesanan').trigger('click');   
                   $('.table-responsive').before(`<div class="alert alert-warning alert-dismissible fade show" role="alert"> Sukses Update data!!<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>`);
                   $('.alert').delay(2000).fadeOut(function() {
                      $(this).remove(); 
                   });
                 }
         },
         
       });
 
     })
 
 
 
     //batal
    $('#saveBtnBatalPemesanan').click( function(e){
       $(this).html('Sending..');
       e.preventDefault();
       $('#formtambahpemesanan').trigger("reset");
          $('#saveBtnBatalPemesanan').html('Batal');
          $('#tombolPemesanan').trigger('click');
          $(document).find('span.error-text').text('');
  
     })
 
 
 
     //delete
     $('body').on('click', '.deleteUser', function () {
      
       var pemesanan_id = $(this).data("id");
       var r = confirm("Are You sure want to delete !");
        if (r == true) {
          $.ajax({
           type: "DELETE",
           url: "/user/pemesanan/ajax"+'/'+pemesanan_id,
           success: function (data) {
             $('.table-responsive').before(`<div class="alert alert-danger alert-dismissible fade show" role="alert"> Sukses hapus data!!<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>`);
             table.draw();
             $('.alert').delay(2000).fadeOut(function() {
               $(this).remove(); 
            });
           },
           error: function (data) {
               console.log('Error:', data);
           }
          });
        } else {
          table.draw();
        }  
   });
 
 
 
   } );


</script>
       <script>




        //UNTUK MWNONAKTIVEKAN KLIK KANAN

      //   $(document).bind("contextmenu",function(e) {
      //   alert('Tidak diperbolehkan');//silahkan tulis pesan yang akan ditampilkan
      //   return false;
      // });

      //   document.onkeydown = function(e) {
      //   if(event.keyCode == 123) {
      //     return false;
      //     }
      //     if(e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)){
      //     alert('Tidak diperbolehkan')
      //     return false;
      //     }
      //     if(e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)){
      //     alert('Tidak diperbolehkan')
      //     return false;
      //     }
      //     if(e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)){
      //     alert('Tidak diperbolehkan')
      //     return false;
      //     }
      //   }

      </script>
  </body>
</html>
